(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return r(5628)}])},3399:function(e,n,r){"use strict";r.d(n,{Z:function(){return b}});var t=r(5893),a=r(3299),s=r(9008),i=r(1664),c=r.n(i),l=r(1955),o=r(7294),u=r(5538),d=r(4247),h=(r(4213),r(2148));function f(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function m(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){f(e,n,r[n])}))}return e}function x(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p(e){var n=e.href,r=e.children,a=x(e,["href","children"]);return(0,t.jsx)(c(),{href:n,children:(0,t.jsx)("a",m({},a,{children:r}))})}var j=r(1163),v=r(3737);function b(e){var n=e.title,r=e.children,i=(0,a.useSession)(),f=i.status,m=i.data,x=(0,o.useContext)(h.y),b=x.state,y=x.dispatch,g=b.cart,w=(0,o.useState)(0),N=w[0],O=w[1];(0,o.useEffect)((function(){O(g.cartItems.reduce((function(e,n){return e+n.quantity}),0))}),[g.cartItems]);var k=(0,o.useState)(""),P=k[0],S=k[1],_=(0,j.useRouter)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.default,{children:[(0,t.jsx)("title",{children:n?n+" - AnalyaTech":"AnalyaTech"}),(0,t.jsx)("meta",{name:"description",content:"Miner Shop"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsx)(u.Ix,{position:"bottom-center",limit:1}),(0,t.jsxs)("div",{className:"flex min-h-screen flex-col justify-between ",children:[(0,t.jsx)("header",{children:(0,t.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,t.jsx)(c(),{href:"/",children:(0,t.jsx)("a",{className:"text-lg font-bold",children:"AnalyaTech"})}),(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_.push("/search?query=".concat(P))},className:"mx-auto hidden w-full justify-center md:flex",children:[(0,t.jsx)("input",{onChange:function(e){return S(e.target.value)},type:"text",className:"rounded-tr-none rounded-br-none p-1 text-sm focus:ring-0",placeholder:"analyatech.fr"}),(0,t.jsx)("button",{className:"rounded rounded-tl-none rounded-bl-none bg-amber-300 p-1 text-sm dark:text-black",type:"submit",id:"button-addon2",children:(0,t.jsx)(v.Z,{className:"h-5 w-"})})]}),(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c(),{href:"/cart",children:(0,t.jsxs)("a",{className:"p-2",children:["Panier",N>0&&(0,t.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:N})]})}),"loading"===f?"Loading":(null===m||void 0===m?void 0:m.user)?(0,t.jsxs)(d.v,{as:"div",className:"relative flex",children:[(0,t.jsx)(d.v.Button,{className:"text-blue-600 ",children:m.user.name}),(0,t.jsxs)(d.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-white shadow-lg ",children:[(0,t.jsx)(d.v.Item,{children:(0,t.jsx)(p,{className:"dropdown-link",href:"/profile",children:"Profil"})}),(0,t.jsx)(d.v.Item,{children:(0,t.jsx)(p,{className:"dropdown-link",href:"/order-history",children:"Commandes"})}),m.user.isAdmin&&(0,t.jsx)(d.v.Item,{children:(0,t.jsx)(p,{className:"dropdown-link",href:"/admin/dashboard",children:"Panneau Admin"})}),(0,t.jsx)(d.v.Item,{children:(0,t.jsx)("a",{className:"dropdown-link",href:"#",onClick:function(){l.Z.remove("cart"),y({type:"CART_RESET"}),(0,a.signOut)({callbackUrl:"/login"})},children:"Se d\xe9connecter"})})]})]}):(0,t.jsx)(c(),{href:"/login",children:(0,t.jsx)("a",{className:"p-2",children:"Connexion"})})]})]})}),(0,t.jsx)("main",{className:"container m-auto mt-4 px-4",children:r}),(0,t.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:(0,t.jsx)("p",{children:"2023 AnalyaTech"})})]})]})}},8657:function(e,n,r){"use strict";r.d(n,{Z:function(){return i}});var t=r(5893),a=r(1664),s=r.n(a);r(7294);function i(e){var n=e.product,r=e.addToCartHandler;return(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)(s(),{href:"/product/".concat(n.slug),children:(0,t.jsx)("a",{children:(0,t.jsx)("img",{src:n.image,alt:n.name,className:"rounded shadow object-cover h-64 w-full"})})}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-5",children:[(0,t.jsx)(s(),{href:"/product/".concat(n.slug),children:(0,t.jsx)("a",{children:(0,t.jsx)("h2",{className:"text-lg",children:n.name})})}),(0,t.jsx)("p",{className:"mb-2",children:n.brand}),(0,t.jsxs)("p",{children:["$",n.price]}),(0,t.jsx)("button",{className:"primary-button",type:"button",onClick:function(){return r(n)},children:"Ajouter au panier"})]})]})}},5628:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return g},default:function(){return w}});var t=r(4051),a=r.n(t),s=r(5893),i=r(9669),c=r.n(i),l=r(1163),o=r(7294),u=r(5538),d=r(3399),h=r(2148),f=r(9965),m=r(8657);function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function p(e,n,r,t,a,s,i){try{var c=e[s](i),l=c.value}catch(o){return void r(o)}c.done?n(l):Promise.resolve(l).then(t,a)}function j(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function v(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){j(e,n,r[n])}))}return e}function b(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return x(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=[{name:"$1 to $5000",value:"1-5000"},{name:"$5000 to $10000",value:"5000-10000"},{name:"$10000 to $20000",value:"10000-20000"}],g=!0;function w(e){var n=(0,l.useRouter)(),r=n.query,t=r.query,i=void 0===t?"all":t,x=r.category,j=void 0===x?"all":x,g=r.brand,w=void 0===g?"all":g,N=r.price,O=void 0===N?"all":N,k=r.sort,P=void 0===k?"featured":k,S=r.page,_=void 0===S?1:S,C=e.products,A=e.countProducts,T=e.categories,E=e.pages,I=function(e){var r=e.page,t=e.category,a=e.brand,s=e.sort,i=e.min,c=e.max,l=e.searchQuery,o=e.price,u=e.rating,d=n.query;r&&(d.page=r),l&&(d.searchQuery=l),s&&(d.sort=s),t&&(d.category=t),a&&(d.brand=a),o&&(d.price=o),u&&(d.rating=u),i&&(d.min,d.min),c&&(d.max,d.max),n.push({pathname:n.pathname,query:d})},q=(0,o.useContext)(h.y),Z=q.state,$=q.dispatch,D=function(){var e,r=(e=a().mark((function e(r){var t,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z.cart.cartItems.find((function(e){return e._id===r._id})),s=t?t.quantity+1:1,e.next=4,c().get("/api/products/".concat(r._id));case 4:if(!(e.sent.data.countInStock<s)){e.next=8;break}return u.Am.error("Sorry. Product is out of stock"),e.abrupt("return");case 8:$({type:"CART_ADD_ITEM",payload:v({},r,{quantity:s})}),n.push("/cart");case 10:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,a){var s=e.apply(n,r);function i(e){p(s,t,a,i,c,"next",e)}function c(e){p(s,t,a,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,s.jsx)(d.Z,{title:"rechercher",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"my-3",children:[(0,s.jsx)("h2",{children:"Cat\xe9gories"}),(0,s.jsxs)("select",{className:"w-full",value:j,onChange:function(e){I({category:e.target.value})},children:[(0,s.jsx)("option",{value:"all",children:"Tous"}),T&&T.map((function(e){return(0,s.jsx)("option",{value:e,children:e},e)})),(0,s.jsx)("option",{children:"GPU (\xe0 venir)"})]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("h2",{children:"Prix"}),(0,s.jsxs)("select",{className:"w-full",value:O,onChange:function(e){I({price:e.target.value})},children:[(0,s.jsx)("option",{value:"all",children:"Tous"}),y&&y.map((function(e){return(0,s.jsx)("option",{value:e.value,children:e.name},e.value)}))]})]})]}),(0,s.jsxs)("div",{className:"md:col-span-3",children:[(0,s.jsxs)("div",{className:"mb-2 flex items-center justify-between border-b-2 pb-2",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[0===C.length?"No":A," Resultat(s)","all"!==i&&""!==i&&" : "+i,"all"!==j&&" : "+j,"all"!==w&&" : "+w,"all"!==O&&" : Price "+O,"\xa0","all"!==i&&""!==i||"all"!==j||"all"!==w||"all"!==O?(0,s.jsx)("button",{onClick:function(){return n.push("/search")},children:(0,s.jsx)(f.Z,{className:"h-5 w-5"})}):null]}),(0,s.jsxs)("div",{children:["Trier par "," ",(0,s.jsxs)("select",{value:P,onChange:function(e){I({sort:e.target.value})},children:[(0,s.jsx)("option",{value:"highest",children:"Du plus cher au moins cher"}),(0,s.jsx)("option",{value:"lowest",children:"Du moins cher au plus cher"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 ",children:C.map((function(e){return(0,s.jsx)(m.Z,{product:e,addToCartHandler:D},e._id)}))}),(0,s.jsx)("ul",{className:"flex",children:C.length>0&&b(Array(E).keys()).map((function(e){return(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"default-button m-2 ".concat(_==e+1?"font-bold":""," "),onClick:function(){I({page:e+1})},children:e+1})},e)}))})]})]})]})})}},9965:function(e,n,r){"use strict";var t=r(7294);const a=t.forwardRef((function(e,n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:n},e),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"}))}));n.Z=a}},function(e){e.O(0,[849,669,774,888,179],(function(){return n=8161,e(e.s=n);var n}));var n=e.O();_N_E=n}]);