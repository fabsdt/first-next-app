(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{3524:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/[slug]",function(){return t(5880)}])},3399:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var r=t(5893),i=t(3299),s=t(9008),c=t(1664),a=t.n(c),l=t(1955),o=t(7294),u=t(5538),d=t(4247),h=(t(4213),t(2148));function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){f(e,n,t[n])}))}return e}function m(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function j(e){var n=e.href,t=e.children,i=m(e,["href","children"]);return(0,r.jsx)(a(),{href:n,children:(0,r.jsx)("a",x({},i,{children:t}))})}var p=t(1163),b=t(3737);function v(e){var n=e.title,t=e.children,c=(0,i.useSession)(),f=c.status,x=c.data,m=(0,o.useContext)(h.y),v=m.state,y=m.dispatch,g=v.cart,w=(0,o.useState)(0),N=w[0],O=w[1];(0,o.useEffect)((function(){O(g.cartItems.reduce((function(e,n){return e+n.quantity}),0))}),[g.cartItems]);var k=(0,o.useState)(""),P=k[0],S=k[1],_=(0,p.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:n?n+" - AnalyaTech":"AnalyaTech"}),(0,r.jsx)("meta",{name:"description",content:"Miner Shop"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(u.Ix,{position:"bottom-center",limit:1}),(0,r.jsxs)("div",{className:"flex min-h-screen flex-col justify-between ",children:[(0,r.jsx)("header",{children:(0,r.jsxs)("nav",{className:"flex h-12 items-center px-4 justify-between shadow-md",children:[(0,r.jsx)(a(),{href:"/",children:(0,r.jsx)("a",{className:"text-lg font-bold",children:"AnalyaTech"})}),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),_.push("/search?query=".concat(P))},className:"mx-auto hidden w-full justify-center md:flex",children:[(0,r.jsx)("input",{onChange:function(e){return S(e.target.value)},type:"text",className:"rounded-tr-none rounded-br-none p-1 text-sm focus:ring-0",placeholder:"analyatech.fr"}),(0,r.jsx)("button",{className:"rounded rounded-tl-none rounded-bl-none bg-amber-300 p-1 text-sm dark:text-black",type:"submit",id:"button-addon2",children:(0,r.jsx)(b.Z,{className:"h-5 w-"})})]}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(a(),{href:"/cart",children:(0,r.jsxs)("a",{className:"p-2",children:["Panier",N>0&&(0,r.jsx)("span",{className:"ml-1 rounded-full bg-red-600 px-2 py-1 text-xs font-bold text-white",children:N})]})}),"loading"===f?"Loading":(null===x||void 0===x?void 0:x.user)?(0,r.jsxs)(d.v,{as:"div",className:"relative flex",children:[(0,r.jsx)(d.v.Button,{className:"text-blue-600 ",children:x.user.name}),(0,r.jsxs)(d.v.Items,{className:"absolute right-0 w-56 origin-top-right bg-white shadow-lg ",children:[(0,r.jsx)(d.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link",href:"/profile",children:"Profil"})}),(0,r.jsx)(d.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link",href:"/order-history",children:"Commandes"})}),x.user.isAdmin&&(0,r.jsx)(d.v.Item,{children:(0,r.jsx)(j,{className:"dropdown-link",href:"/admin/dashboard",children:"Panneau Admin"})}),(0,r.jsx)(d.v.Item,{children:(0,r.jsx)("a",{className:"dropdown-link",href:"#",onClick:function(){l.Z.remove("cart"),y({type:"CART_RESET"}),(0,i.signOut)({callbackUrl:"/login"})},children:"Se d\xe9connecter"})})]})]}):(0,r.jsx)(a(),{href:"/login",children:(0,r.jsx)("a",{className:"p-2",children:"Connexion"})})]})]})}),(0,r.jsx)("main",{className:"container m-auto mt-4 px-4",children:t}),(0,r.jsx)("footer",{className:"flex h-10 justify-center items-center shadow-inner",children:(0,r.jsx)("p",{children:"2023 AnalyaTech"})})]})]})}},5880:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return y},default:function(){return g}});var r=t(4051),i=t.n(r),s=t(5893),c=t(9669),a=t.n(c),l=t(5675),o=t.n(l),u=t(1664),d=t.n(u),h=t(1163),f=t(7294),x=t(5538),m=t(3399),j=t(2148);function p(e,n,t,r,i,s,c){try{var a=e[s](c),l=a.value}catch(o){return void t(o)}a.done?n(l):Promise.resolve(l).then(r,i)}function b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){b(e,n,t[n])}))}return e}var y=!0;function g(e){var n=e.product,t=(0,f.useContext)(j.y),r=t.state,c=t.dispatch,l=(0,h.useRouter)();if(!n)return(0,s.jsx)(m.Z,{title:"Article introuvable",children:"Article introuvable"});var u=function(){var e,t=(e=i().mark((function e(){var t,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.cart.cartItems.find((function(e){return e.slug===n.slug})),s=t?t.quantity+1:1,e.next=4,a().get("/api/products/".concat(n._id));case 4:if(!(e.sent.data.countInStock<s)){e.next=7;break}return e.abrupt("return",x.Am.error("Sorry. Product is out of stock"));case 7:c({type:"CART_ADD_ITEM",payload:v({},n,{quantity:s})}),l.push("/cart");case 9:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function c(e){p(s,r,i,c,a,"next",e)}function a(e){p(s,r,i,c,a,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,s.jsxs)(m.Z,{title:n.name,children:[(0,s.jsx)("div",{className:"py-2",children:(0,s.jsx)(d(),{href:"/",children:"Retour \xe0 notre s\xe9lection"})}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 md:gap-3",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(o(),{src:n.image,alt:n.name,width:640,height:500,layout:"responsive"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("h1",{className:"text-lg",children:n.name})}),(0,s.jsx)("br",{}),(0,s.jsx)("li",{children:n.description})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"card p-5",children:[(0,s.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,s.jsx)("div",{children:"Prix"}),(0,s.jsxs)("div",{children:["$",n.price]})]}),(0,s.jsxs)("div",{className:"mb-2 flex justify-between",children:[(0,s.jsx)("div",{children:"Statut"}),(0,s.jsx)("div",{children:n.countInStock>0?"Disponible":"Indisponible"})]}),(0,s.jsx)("button",{className:"primary-button w-full",onClick:u,children:"Ajouter au panier"})]})})]})]})}}},function(e){e.O(0,[849,669,675,774,888,179],(function(){return n=3524,e(e.s=n);var n}));var n=e.O();_N_E=n}]);